<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IBAN Shield - Demo Verifica</title>
  <style>
    body{
      font-family: Arial, sans-serif;
      background:#111827;
      color:#fff;
      margin:0;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .wrap{
      width:100%;
      max-width:980px;
      padding:24px;
      display:flex;
      gap:24px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }
    .hero{
      flex:1 1 320px;
      min-width:280px;
      padding:12px 8px;
    }
    .brand{
      font-size:48px;
      font-weight:800;
      letter-spacing:0.5px;
      margin:0 0 10px 0;
    }
    .subtitle{
      font-size:16px;
      line-height:1.45;
      opacity:0.9;
      margin:0;
      max-width:520px;
    }
    .card{
      flex:0 1 420px;
      width:420px;
      background:#f3f4f6;
      border-radius:14px;
      padding:20px 18px 14px 18px;
      box-shadow:0 18px 45px rgba(0,0,0,.35);
      color:#111;
    }
    .card h2{
      text-align:center;
      margin:6px 0 14px 0;
      font-size:34px;
      font-weight:800;
      color:#111;
    }
    input{
      width:100%;
      padding:14px 12px;
      margin:8px 0;
      border-radius:10px;
      border:1px solid #d1d5db;
      font-size:16px;
      outline:none;
      background:#fff;
      box-sizing:border-box;
    }
    input:focus{
      border-color:#60a5fa;
      box-shadow:0 0 0 3px rgba(96,165,250,.25);
    }
    button{
      width:100%;
      padding:14px 12px;
      background:#2563eb;
      color:white;
      border:none;
      border-radius:10px;
      font-size:18px;
      cursor:pointer;
      margin-top:10px;
      font-weight:700;
    }
    button:hover{ background:#1d4ed8; }
    .result{
      margin-top:14px;
      padding:12px;
      border-radius:10px;
      font-weight:700;
      font-size:16px;
    }
    .success{ background:#d1fae5; color:#065f46; }
    .warning{ background:#fef3c7; color:#92400e; }
    .danger{ background:#fee2e2; color:#991b1b; }

    .footerNote{
      margin-top:10px;
      font-size:12.5px;
      opacity:.85;
      color:#374151;
      line-height:1.35;
      text-align:center;
    }

    .microNote{
      margin-top:12px;
      font-size:12px;
      color:#9ca3af;
      text-align:center;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1 class="brand">IBAN Shield</h1>
      <p class="subtitle">
        Verifica preventiva <b>IBAN + intestatario</b> prima del bonifico.
        Strumento di prevenzione frodi per <b>marketplace</b> e pagamenti ad alto importo.
      </p>
    </div>

    <div class="card">
      <h2>Demo Verifica</h2>

      <input id="iban" placeholder="Inserisci IBAN" />
      <input id="name" placeholder="Nome intestatario" />
      <input id="amount" type="number" placeholder="Importo (€)" />

      <button onclick="verify()">Verifica Transazione</button>

      <div id="result" class="result" style="display:none;"></div>

      <div class="footerNote">
        Demo commerciale — <b>Simulazione tecnica</b>.
        In produzione: <b>VOP + Name Check (PSD2)</b> tramite provider (es. TrueLayer).
      </div>

      <div class="microNote">
        Tip demo: prova IBAN che inizia con <b>IT60</b> e nome <b>Mario Rossi</b>.
      </div>
    </div>
  </div>

  <script>
    function normalize(str) {
      return (str || "").trim().toLowerCase();
    }

    function showResult(html, cls){
      const el = document.getElementById("result");
      el.style.display = "block";
      el.className = "result " + cls;
      el.innerHTML = html;
    }

    function verify() {
      const ibanRaw = document.getElementById("iban").value;
      const nameRaw = document.getElementById("name").value;
      const amountRaw = document.getElementById("amount").value;

      const iban = (ibanRaw || "").trim();
      const name = normalize(nameRaw);
      const amount = parseFloat(amountRaw);

      if (!iban || !name || !amountRaw) {
        showResult("Compila tutti i campi.", "warning");
        return;
      }
      if (isNaN(amount) || amount <= 0) {
        showResult("Inserisci un importo valido (> 0).", "warning");
        return;
      }

      // ✅ SIMULAZIONE: IBAN valido se inizia con IT60 (demo)
      if (!iban.startsWith("IT60")) {
        showResult("❌ IBAN non valido (demo).", "danger");
        return;
      }

      // ✅ SIMULAZIONE: Name match valido SOLO per "Mario Rossi" (demo)
      const validName = normalize("Mario Rossi");
      if (name !== validName) {
        showResult("❌ Nome intestatario NON compatibile con IBAN (demo).", "danger");
        return;
      }

      // ✅ LOGICA IMPORTO: sopra 1000 richiede verifica avanzata (VOP)
      if (amount > 1000) {
        showResult("⚠ Match positivo. Importo elevato → attivazione verifica avanzata (VOP).", "warning");
      } else {
        showResult("✔ IBAN valido. Nome compatibile. Transazione a basso rischio.", "success");
      }
    }
  </script>
</body>
</html>
