<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IBAN Shield - Demo</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <style>
    :root{
      --bg1:#0b1220;
      --bg2:#111b2f;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#6b7280;
      --primary:#2563eb;
      --primary2:#1e40af;
      --border:#e5e7eb;

      --okBg:#d1fae5;
      --okText:#065f46;

      --warnBg:#fef3c7;
      --warnText:#92400e;

      --errBg:#fee2e2;
      --errText:#991b1b;
    }

    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1000px 500px at 20% 10%, rgba(37,99,235,.28), transparent 60%),
                  radial-gradient(900px 600px at 90% 30%, rgba(16,185,129,.14), transparent 60%),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }

    .card{
      width:min(520px, 92vw);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.35);
      border-radius:22px;
      box-shadow: 0 25px 70px rgba(0,0,0,.45);
      padding:26px 26px 22px;
    }

    .brandRow{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:14px;
      margin-bottom:18px;
      user-select:none;
    }

    .brandLogo{
      width:56px;
      height:56px;
      border-radius:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(37,99,235,.10);
      border:1px solid rgba(37,99,235,.18);
    }

    .brandText{
      line-height:1.05;
      display:flex;
      flex-direction:column;
      align-items:flex-start;
    }

    .brandText .top{
      font-weight:900;
      letter-spacing:.4px;
      font-size:26px;
      color:var(--text);
    }

    .brandText .sub{
      font-weight:800;
      font-size:18px;
      color:var(--primary);
      margin-top:2px;
    }

    .tagline{
      text-align:center;
      color:var(--muted);
      font-size:12.5px;
      margin-top:-8px;
      margin-bottom:18px;
    }

    .field{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-bottom:12px;
    }

    label{
      font-size:12px;
      color:#374151;
      font-weight:700;
    }

    input{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.95);
      outline:none;
      font-size:14.5px;
      color:var(--text);
      transition:.15s;
    }

    input:focus{
      border-color: rgba(37,99,235,.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    }

    .btn{
      width:100%;
      padding:13px 14px;
      border:none;
      border-radius:14px;
      background: linear-gradient(180deg, var(--primary), var(--primary2));
      color:white;
      font-weight:900;
      letter-spacing:.2px;
      font-size:15px;
      cursor:pointer;
      transition:.15s;
      box-shadow: 0 12px 28px rgba(37,99,235,.28);
      margin-top:6px;
    }

    .btn.secondary{
      background: linear-gradient(180deg, #0f172a, #0b1220);
      box-shadow: 0 12px 28px rgba(0,0,0,.22);
      display:none;
      margin-top:10px;
    }

    .btn.pay{
      background: linear-gradient(180deg, #16a34a, #15803d);
      box-shadow: 0 12px 28px rgba(22,163,74,.22);
      display:none;
      margin-top:10px;
    }

    .result{
      margin-top:14px;
      padding:14px 14px;
      border-radius:14px;
      font-size:14px;
      border:1px solid rgba(0,0,0,.06);
    }

    .success{ background: var(--okBg); color: var(--okText); }
    .warning{ background: var(--warnBg); color: var(--warnText); }
    .error{ background: var(--errBg); color: var(--errText); }

    .score{
      margin-top:8px;
      font-weight:900;
      font-size:14px;
    }

    #qrTmp {
      position: fixed;
      left: -9999px;
      top: -9999px;
      width: 256px;
      height: 256px;
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>

<body>
<div class="card">

  <!-- CONTENUTO IDENTICO AL TUO -->

  <!-- SCRIPT -->

<script>

  const validIBAN = "IT60X0542811101000000123456";
  const validName = "mario rossi";
  let lastData = null;

  function normalize(str){
    return (str || "").toLowerCase().trim().replace(/\s+/g," ");
  }

  function pagaESblocca(){

    const matchOk = (normalize(lastData.nome) === validName);

    let score = 95;
    let livello = "Elevato livello di sicurezza";
    let msg = "âœ… Esito ufficiale: IBAN valido e intestatario compatibile. Transazione con elevato livello di sicurezza.";
    let cls = "result success";

    if(lastData.importo > 1000){
      score = 82;
      livello = "Sicurezza verificata con controllo avanzato";
      msg = "ðŸ›¡ Esito ufficiale: match positivo. Importo elevato â†’ verifica avanzata (VOP).";
      cls = "result warning";
    }

    lastData.score = score;
    lastData.livello = livello;

  }

  async function generaPDF(){

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({ unit:"mm", format:"a4" });

    doc.text("Livello Sicurezza: " + lastData.livello, 24, 160);

    doc.setFontSize(8);
    doc.text(
      "Il presente certificato attesta esclusivamente lâ€™esito della verifica tecnica alla data di emissione.",
      24,
      128
    );
    doc.text(
      "La validitÃ  Ã¨ subordinata alla verifica dello stato online tramite QR.",
      24,
      132
    );

    doc.save("Certificato_IBAN_Shield.pdf");
  }

</script>
</body>
</html>